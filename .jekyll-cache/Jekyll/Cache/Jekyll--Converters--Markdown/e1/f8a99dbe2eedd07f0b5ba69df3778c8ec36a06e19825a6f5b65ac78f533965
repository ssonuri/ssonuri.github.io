I"Ş)<h2 id="í¬ë¡¤ë§crawling-vs-ìŠ¤í¬ë˜í•‘scraping">í¬ë¡¤ë§(Crawling) vs ìŠ¤í¬ë˜í•‘(Scraping)</h2>
<p>ì‹œì‘í•˜ê¸°ì— ì•ì„œ, í¬ë¡¤ë§(Crawling)ê³¼ ìŠ¤í¬ë˜í•‘(Scraping)ë¥¼ êµ¬ë¶„í•  í•„ìš”ê°€ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë‘˜ ë‹¤ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•œë‹¤ëŠ” ì ì—ì„œ ëª©ì ì€ ê°™ìœ¼ë‚˜, ë°©ë²•, ìˆ˜ì§‘ ëŒ€ìƒ ë“±ì—ì„œ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<p>ìŠ¤í¬ë˜í•‘ì€ ìˆ˜ì§‘ ëŒ€ìƒì´ ë°˜ë“œì‹œ ì›¹ì¼ í•„ìš”ëŠ” ì—†ìœ¼ë©°, DBë‚˜ Social media ë“± ì ìš© ë²”ìœ„ê°€ ë„“ë‹¤ê³  í•©ë‹ˆë‹¤. ì–´ë ¸ì„ ì ì— ì‹ ë¬¸ê¸°ì‚¬ë¥¼ ì˜ë¼ì„œ ìŠ¤ì¼€ì¹˜ë¶ì— ë¶™ì—¬ì„œ ëƒˆë˜ NIE(Newspaper in Education)ë¥¼ ê¸°ì–µí•˜ì‹œë‚˜ìš”? ê·¸ ë•ŒëŠ” ê´€ì‹¬ ì •ë³´ë¥¼ ì°¾ì•„ ì¼ì¼ì´ ìë¥´ê³  ì˜¤ë ¤ ë¶™ì˜€ë‹¤ë©´, ì´ì œëŠ” ì•„ë‚ ë¡œê·¸ì  í–‰ìœ„ë¥¼ ìë™í™” í•´ì£¼ëŠ” ë„êµ¬ ë° APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ í¸ë¦¬í•˜ê²Œ ì¶”ì¶œí•˜ê³  ì •ë¦¬í•  ìˆ˜ ìˆì§€ìš”.</p>

<p>ë°˜ë©´ í¬ë¡¤ë§ì€ í¬ë¡¤ëŸ¬(ë´‡, Bot)ê°€ ì›¹í˜ì´ì§€ì˜ ì†ŒìŠ¤ë¥¼ ê¸ì–´ì˜¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ê¸ì–´ì˜¨ ë°ì´í„°ë¡œë¶€í„° ì›í•˜ëŠ” ëŒ€ë¡œ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì„ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê²ƒì´ ì¥ì ì´ì ë‹¨ì ì´ ë  ìˆ˜ë„ ìˆê² ìŠµë‹ˆë‹¤. ì—„ì²­ë‚œ ì–‘ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•´ì•¼ í•˜ê³  ì˜ˆì™¸ì²˜ë¦¬ ë“±ì„ ê³ ë ¤í•´ë³¸ë‹¤ë©´ ì œë²• ë§Œë§Œì¹˜ ì•Šì€ ì‘ì—…ì´ ë  ê²ƒ ê°™ë„¤ìš”. ìš”ì¦˜ ì™ ë§Œí•œ ì„œë¹„ìŠ¤ë“¤ì€ APIë¥¼ ì œê³µí•˜ê³  ìˆìœ¼ë¯€ë¡œ, í•„ìš”ì— ë”°ë¼ ì˜ ì„ íƒí•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<p>â€‹</p>

<h2 id="prawë¡œ-ìŠ¤í¬ë˜í•‘í•˜ê¸°">PRAWë¡œ ìŠ¤í¬ë˜í•‘í•˜ê¸°</h2>
<p>ì•„ë˜ëŠ” PRAW(The Python Reddit API Wrapper)ì„ ì‚¬ìš©í•˜ì—¬ Redditì—ì„œ ë³¸ë¬¸ê³¼ ìµœìƒìœ„ ë ˆë²¨ì˜ ëŒ“ê¸€ë§Œ ì½ì–´ì„œ CSVíŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” íŒŒì´ì¬ ì½”ë“œì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ë™ì‘í•˜ê¸° ìœ„í•´ì„œëŠ” Redditì—ì„œ <strong>Create application</strong> ì ˆì°¨ë¥¼ ë°Ÿê³  <strong>Client ID</strong>ì™€ <strong>Secret</strong>ì„ ë°œê¸‰ë°›ì•„ì„œ ì½”ë“œì— ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">praw</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">CLIENT_ID</span> <span class="o">=</span> <span class="s">'????'</span>
<span class="n">CLIENT_SECRET</span> <span class="o">=</span> <span class="s">'????'</span>
<span class="n">USER_AGENT</span> <span class="o">=</span> <span class="s">'????'</span>
<span class="n">SUB_REDDIT</span> <span class="o">=</span> <span class="s">'HealthAnxiety'</span> <span class="c1"># Crawlingí•  ë¶„ì•¼
</span><span class="n">LIMIT</span> <span class="o">=</span> <span class="mi">999</span>  <span class="c1"># ìˆ˜ì§‘í•  ë°ì´í„°ì˜ ì–‘
</span>

<span class="k">def</span> <span class="nf">scrap_reddit</span><span class="p">():</span>
    <span class="n">reddit</span> <span class="o">=</span> <span class="n">praw</span><span class="o">.</span><span class="n">Reddit</span><span class="p">(</span><span class="n">client_id</span><span class="o">=</span><span class="n">CLIENT_ID</span><span class="p">,</span>
                         <span class="n">client_secret</span><span class="o">=</span><span class="n">CLIENT_SECRET</span><span class="p">,</span>
                         <span class="n">user_agent</span><span class="o">=</span><span class="n">USER_AGENT</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"======================================="</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Scrapping Reddit Submission"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"=======================================</span><span class="se">\n\n</span><span class="s">"</span><span class="p">)</span>

    <span class="n">scrap_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">total_subreddit</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">submission</span> <span class="ow">in</span> <span class="n">reddit</span><span class="o">.</span><span class="n">subreddit</span><span class="p">(</span><span class="n">SUB_REDDIT</span><span class="p">)</span><span class="o">.</span><span class="n">hot</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="n">LIMIT</span><span class="p">):</span>
        <span class="n">total_subreddit</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">submission_dict</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">submission</span><span class="p">)</span>

        <span class="c1"># Title
</span>        <span class="k">print</span><span class="p">(</span><span class="s">"[Title </span><span class="si">%03</span><span class="s">d] : "</span> <span class="o">%</span> <span class="p">(</span><span class="n">total_subreddit</span><span class="p">),</span> <span class="n">submission</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">writelist</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">submission</span><span class="o">.</span><span class="n">created_utc</span><span class="p">),</span> 
                     <span class="n">submission</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> 
                     <span class="n">submission_dict</span><span class="p">[</span><span class="s">'selftext'</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Comment
</span>        <span class="n">post</span> <span class="o">=</span> <span class="n">reddit</span><span class="o">.</span><span class="n">submission</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">submission_dict</span><span class="p">[</span><span class="s">'id'</span><span class="p">])</span>
        <span class="n">total_cmt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">top_level_comment</span> <span class="ow">in</span> <span class="n">post</span><span class="o">.</span><span class="n">comments</span><span class="p">:</span>
            <span class="n">writelist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">top_level_comment</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">))</span>
            <span class="n">total_cmt</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">writelist</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">total_cmt</span>
        <span class="n">scrap_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">writelist</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'----------------------------------------------'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">scrap_data</span><span class="p">,</span> <span class="n">total_subreddit</span>


<span class="k">def</span> <span class="nf">write_csv</span><span class="p">(</span><span class="n">scrap_data</span><span class="p">,</span> <span class="n">total_subreddit</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"data_</span><span class="si">%</span><span class="s">Y</span><span class="si">%</span><span class="s">m</span><span class="si">%</span><span class="s">d_</span><span class="si">%</span><span class="s">H</span><span class="si">%</span><span class="s">M</span><span class="si">%</span><span class="s">S.csv"</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()),</span> 
              <span class="s">'wt'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">","</span><span class="p">,</span> <span class="n">lineterminator</span><span class="o">=</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">scrap_data</span><span class="p">:</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">scrap_data</span><span class="p">,</span> <span class="n">total_subreddit</span> <span class="o">=</span> <span class="n">scrap_reddit</span><span class="p">()</span>
    <span class="n">write_csv</span><span class="p">(</span><span class="n">scrap_data</span><span class="p">,</span> <span class="n">total_subreddit</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>
<p>â€‹                â€‹</p>

<h3 id="reference"><strong><em>Reference</em></strong></h3>
<ul>
  <li>https://www.promptcloud.com/data-scraping-vs-data-crawling</li>
  <li>https://praw.readthedocs.io/en/latest
  â€‹</li>
</ul>
:ET